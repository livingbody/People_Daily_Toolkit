# äººæ°‘æ—¥æŠ¥PDFå®Œæ•´å¤„ç†å·¥å…·é›†

è¿™æ˜¯ä¸€ä¸ªç”¨äºäººæ°‘æ—¥æŠ¥PDFå®Œæ•´å·¥ä½œæµç¨‹çš„Pythonå·¥å…·é›†ï¼Œæ”¯æŒä»ç½‘ç«™ä¸‹è½½ã€æ–‡æœ¬æå–åˆ°AIæ™ºèƒ½åˆ†æçš„å…¨æµç¨‹å¤„ç†ã€‚

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

### ğŸ“¥ **PDFä¸‹è½½åŠŸèƒ½**
- ğŸŒ è‡ªåŠ¨ä»äººæ°‘æ—¥æŠ¥å®˜ç½‘ä¸‹è½½æŒ‡å®šæ—¥æœŸçš„PDFç‰ˆæŠ¥çº¸
- ğŸ“„ è‡ªåŠ¨æ£€æµ‹æŠ¥çº¸ç‰ˆé¢æ•°é‡ï¼ˆé€šå¸¸8-16ç‰ˆï¼‰
- ğŸ”„ æ™ºèƒ½åˆå¹¶å¤šä¸ªç‰ˆé¢ä¸ºä¸€ä¸ªå®Œæ•´çš„PDFæ–‡ä»¶
- â° æ”¯æŒæŒ‡å®šæ—¥æœŸä¸‹è½½å’Œæ‰¹é‡ä¸‹è½½

### ğŸ“– **PDFæ–‡æœ¬æå–**
- ğŸ” ä½¿ç”¨PyPDF2åº“ç²¾ç¡®æå–PDFæ–‡ä»¶ä¸­çš„æ–‡æœ¬å†…å®¹
- ğŸ“ å¤„ç†å„ç§PDFæ ¼å¼å’Œç¼–ç 
- ğŸ›¡ï¸ å®¹é”™å¤„ç†ï¼Œé˜²æ­¢æå–å¤±è´¥å½±å“æ•´ä½“æµç¨‹

### ğŸ¤– **AIæ™ºèƒ½åˆ†æ**
- ğŸ§  åŸºäºå¤§è¯­è¨€æ¨¡å‹å¯¹äººæ°‘æ—¥æŠ¥å†…å®¹è¿›è¡Œæ·±åº¦åˆ†æ
- ğŸ“Š è‡ªåŠ¨åˆ†ç±»è¯†åˆ«ï¼šé‡å¤§äº‹ä»¶ã€è¯„è®ºæ–‡ç« ã€é‡‘å¥å…¸æ•…ã€ä¼˜ç§€è¯ç»„
- ğŸ“‹ ç”Ÿæˆç»“æ„åŒ–çš„Markdownæ ¼å¼åˆ†ææŠ¥å‘Š
- ğŸ’¡ æ”¯æŒæµå¼è¾“å‡ºï¼Œå®æ—¶æ˜¾ç¤ºåˆ†æè¿‡ç¨‹

## ğŸ¯ æ‰©å±•ç”¨ä¾‹
- ğŸ§  æ‰‹æœºç«¯å®šæ—¶çˆ¬å–ã€Šäººæ°‘æ—¥æŠ¥ã€‹ï¼Œå¦‚æ¯å¤©æ—©æ™¨7:00çˆ¬å–å½“æ—¥ã€Šäººæ°‘æ—¥æŠ¥ã€‹
- ğŸ“Š è‡ªåŠ¨åˆ†æå½“æ—¥æŠ¥çº¸ç²¾åï¼Œå¹¶å­˜å…¥obsidianç¬”è®°

![](img/6e7aeac5c6c91a580363d5815ea17398.jpg)
![](img/72038b848d13dcfd9dda8aa52e720b52.jpg)
![](img/23b2e02f234122ba7717405cf6beb75f.jpg)


## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
xx/
â”œâ”€â”€ rmrb_down.py              # äººæ°‘æ—¥æŠ¥PDFä¸‹è½½å·¥å…·
â”œâ”€â”€ readpdf.py                # PDFæ–‡æœ¬æå–å·¥å…·  
â”œâ”€â”€ note_for_rmrb.py          # äººæ°‘æ—¥æŠ¥AIæ™ºèƒ½åˆ†æå·¥å…·
â”œâ”€â”€ requirements.txt          # é¡¹ç›®ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ README.md                # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â””â”€â”€ storage/
    â””â”€â”€ downloads/
        â””â”€â”€ rmrb/            # ä¸‹è½½çš„PDFæ–‡ä»¶å­˜å‚¨ç›®å½•
            â””â”€â”€ rmrb_YYYY-MM-DD.pdf
â””â”€â”€ äººæ°‘æ—¥æŠ¥_YYYY-MM-DD.md    # AIåˆ†æç»“æœè¾“å‡ºæ–‡ä»¶
```

## ğŸ“¦ å®‰è£…è¯´æ˜

### 1. ç¯å¢ƒå‡†å¤‡
```bash
# ç¡®ä¿Pythonç‰ˆæœ¬ >= 3.7
python --version
```

### 2. å…‹éš†é¡¹ç›®
```bash
git clone <é¡¹ç›®åœ°å€>
cd xx
```

### 3. å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

**ä¾èµ–åº“åˆ—è¡¨**ï¼š
- `requests==2.31.0` - HTTPè¯·æ±‚åº“ï¼Œç”¨äºç½‘é¡µæŠ“å–
- `beautifulsoup4==4.12.2` - HTMLè§£æåº“ï¼Œç”¨äºç½‘é¡µå†…å®¹è§£æ
- `PyPDF2==3.0.1` - PDFå¤„ç†åº“ï¼Œç”¨äºæ–‡ä»¶è¯»å–å’Œåˆå¹¶
- `openai==1.58.1` - OpenAI APIåº“ï¼Œç”¨äºå¤§æ¨¡å‹è°ƒç”¨

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### å®Œæ•´å·¥ä½œæµç¨‹

#### æ­¥éª¤1ï¼šä¸‹è½½äººæ°‘æ—¥æŠ¥PDF
```bash
# ä¸‹è½½å½“å¤©çš„äººæ°‘æ—¥æŠ¥PDF
python rmrb_down.py

# æˆ–ä¸‹è½½æŒ‡å®šæ—¥æœŸçš„PDF
python -c "from rmrb_down import download_rmrb_pdf; download_rmrb_pdf('2025-12-31')"
```

#### æ­¥éª¤2ï¼šAIæ™ºèƒ½åˆ†æ
```bash
# åˆ†æå½“å¤©çš„äººæ°‘æ—¥æŠ¥
python note_for_rmrb.py

# æˆ–åˆ†ææŒ‡å®šæ—¥æœŸçš„PDF
python -c "
from note_for_rmrb import main, date_str
date_str = '2025-12-31'
rmrb_pdf_file = f'rmrb_{date_str}.pdf'
content = read_pdf(rmrb_pdf_file)
markdown_note = extract_info(content)
with open(f'äººæ°‘æ—¥æŠ¥_{date_str}.md', 'w', encoding='utf-8') as file:
    print(markdown_note, file=file)
"
```

### ç‹¬ç«‹æ¨¡å—ä½¿ç”¨

#### ğŸ”½ ä¸‹è½½æ¨¡å— (rmrb_down.py)
```python
from rmrb_down import download_rmrb_pdf

# ä¸‹è½½å½“å¤©çš„äººæ°‘æ—¥æŠ¥
result = download_rmrb_pdf()
if result:
    print(f"PDFä¸‹è½½å®Œæˆ: {result}")
else:
    print("ä¸‹è½½å¤±è´¥")

# ä¸‹è½½æŒ‡å®šæ—¥æœŸ
result = download_rmrb_pdf('2025-12-31')
```

#### ğŸ“– æå–æ¨¡å— (readpdf.py)
```python
from readpdf import read_pdf

# æå–PDFæ–‡æœ¬
text = read_pdf("rmrb_2025-12-31.pdf")
print(text[:500])  # æ‰“å°å‰500ä¸ªå­—ç¬¦
```

#### ğŸ¤– åˆ†ææ¨¡å— (note_for_rmrb.py)
```python
from note_for_rmrb import read_pdf, extract_info

# è¯»å–PDFå¹¶åˆ†æ
content = read_pdf("rmrb_2025-12-31.pdf")
analysis = extract_info(content)
print(analysis)
```

## ğŸ“Š è¾“å‡ºæ ¼å¼

AIåˆ†æç»“æœåŒ…å«ä»¥ä¸‹å››ä¸ªç»´åº¦ï¼š

### 1. ğŸ›ï¸ é‡å¤§äº‹ä»¶
- **æ”¿æ²»äº‹ä»¶**: é‡è¦ä¼šè®®ã€æ”¿ç­–å‘å¸ƒã€äººäº‹å˜åŠ¨
- **ç»æµäº‹ä»¶**: ç»æµæ•°æ®å‘å¸ƒã€é‡å¤§æŠ•èµ„é¡¹ç›®
- **ç¤¾ä¼šäº‹ä»¶**: é‡è¦ç¤¾ä¼šæ´»åŠ¨ã€æ°‘ç”Ÿæ”¿ç­–
- **å›½é™…äº‹ä»¶**: å¤–äº¤æ´»åŠ¨ã€å›½é™…åˆä½œ

### 2. ğŸ“° è¯„è®ºå‘˜æ–‡ç« 
- **æ”¿ç­–è§£è¯»**: é‡è¦æ”¿ç­–çš„æ·±åº¦åˆ†æ
- **ç¤¾è®ºè¯„è®º**: å®˜æ–¹ç«‹åœºå’Œè§‚ç‚¹è¡¨è¾¾
- **ç†è®ºæ–‡ç« **: é‡è¦ç†è®ºé˜è¿°å’Œåˆ›æ–°è§‚ç‚¹

### 3. ğŸ’ é‡‘å¥ã€å…¸æ•…ã€å¤è¯­
- **ç»å…¸è¯­å¥**: é¢†å¯¼äººé‡è¦è®²è¯ä¸­çš„ç²¾å½©è¡¨è¾¾
- **å¤è¯—è¯å¼•ç”¨**: å†å²æ–‡çŒ®å’Œå¤å…¸æ–‡å­¦çš„å¼•ç”¨
- **å…¸æ•…è¿ç”¨**: å†å²å…¸æ•…åœ¨ç°ä»£è¯­å¢ƒä¸­çš„è¿ç”¨

### 4. âœ¨ ä¼˜ç§€è¯ç»„ã€æ–°è¯
- **æ”¿ç­–æœ¯è¯­**: åˆ›æ–°æ€§çš„æ”¿ç­–è¡¨è¾¾å’Œä¸“ä¸šç”¨è¯­
- **æ–°è¯çƒ­è¯**: å½“ä¸‹æµè¡Œçš„æ”¿æ²»å’Œç¤¾ä¼šæ–°è¯æ±‡
- **è¡¨è¾¾æŠ€å·§**: ä¼˜ç§€çš„ä¿®è¾æ‰‹æ³•å’Œè¡¨è¾¾æ–¹å¼

## âš™ï¸ æ ¸å¿ƒæ¨¡å—è¯¦è§£

### ğŸ“¥ rmrb_down.py - PDFä¸‹è½½å·¥å…·
- **ä¸»è¦åŠŸèƒ½**: è‡ªåŠ¨ä¸‹è½½å¹¶åˆå¹¶äººæ°‘æ—¥æŠ¥PDF
- **æ ¸å¿ƒå‡½æ•°**: 
  - `download_rmrb_pdf()` - ä¸»å…¥å£å‡½æ•°
  - `get_pdf_urls()` - è·å–æ‰€æœ‰ç‰ˆé¢PDFé“¾æ¥
  - `download_pdfs()` - æ‰¹é‡ä¸‹è½½PDFæ–‡ä»¶
  - `merge_pdfs()` - åˆå¹¶å¤šä¸ªPDFæ–‡ä»¶
- **è¾“å‡º**: `storage/downloads/rmrb/rmrb_YYYY-MM-DD.pdf`

### ğŸ“– readpdf.py - æ–‡æœ¬æå–å·¥å…·
- **ä¸»è¦åŠŸèƒ½**: PDFæ–‡æœ¬å†…å®¹æå–
- **æ ¸å¿ƒå‡½æ•°**: 
  - `read_pdf()` - æå–PDFæ–‡æœ¬å†…å®¹
- **è¾“å…¥**: PDFæ–‡ä»¶è·¯å¾„
- **è¾“å‡º**: çº¯æ–‡æœ¬å­—ç¬¦ä¸²

### ğŸ¤– note_for_rmrb.py - AIåˆ†æå·¥å…·
- **ä¸»è¦åŠŸèƒ½**: ä½¿ç”¨å¤§æ¨¡å‹è¿›è¡Œæ™ºèƒ½åˆ†æ
- **æ ¸å¿ƒå‡½æ•°**: 
  - `extract_info()` - AIåˆ†æä¸»å‡½æ•°
  - `read_pdf()` - PDFæ–‡æœ¬æå–
- **AIæ¨¡å‹**: ernie-4.5-turbo-vl (ç™¾åº¦AI Studio)
- **è¾“å‡º**: `äººæ°‘æ—¥æŠ¥_YYYY-MM-DD.md`

## ğŸ”§ é…ç½®è¯´æ˜

### APIé…ç½®
åœ¨ `note_for_rmrb.py` ä¸­é…ç½®AIæœåŠ¡ï¼š

```python
client = OpenAI(
    api_key="your-api-key",           # APIå¯†é’¥
    base_url="https://aistudio.baidu.com/llm/lmapi/v3",  # ç™¾åº¦AI Studioåœ°å€
)
```

### æ¨¡å‹å‚æ•°
- **æ¨¡å‹**: ernie-4.5-turbo-vl
- **æœ€å¤§è¾“å‡º**: 12000 tokens
- **æ¸©åº¦**: 0.2 (ç¡®ä¿è¾“å‡ºç¨³å®šæ€§)
- **æ€è€ƒæ¨¡å¼**: å¯ç”¨ (æé«˜åˆ†æè´¨é‡)
- **é‡å¤æƒ©ç½š**: 1.0 (æ§åˆ¶å†…å®¹é‡å¤)

### ä¸‹è½½é…ç½®
- **è¯·æ±‚è¶…æ—¶**: 10-30ç§’
- **ä¸‹è½½é—´éš”**: 1ç§’ (é¿å…è¯·æ±‚è¿‡äºé¢‘ç¹)
- **å­˜å‚¨è·¯å¾„**: `storage/downloads/rmrb/`

## ğŸ“ æ–‡ä»¶ç»„ç»‡

### è¾“å…¥æ–‡ä»¶
- **PDFæ–‡ä»¶**: `storage/downloads/rmrb/rmrb_YYYY-MM-DD.pdf`
- **æ‰‹åŠ¨ä¸Šä¼ **: é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `rmrb_YYYY-MM-DD.pdf`

### è¾“å‡ºæ–‡ä»¶
- **åˆ†ææŠ¥å‘Š**: `äººæ°‘æ—¥æŠ¥_YYYY-MM-DD.md`
- **æå–æ–‡æœ¬**: æ§åˆ¶å°è¾“å‡ºæˆ–å˜é‡å­˜å‚¨

## âš ï¸ ä½¿ç”¨æ³¨æ„äº‹é¡¹

### ğŸ” å®‰å…¨æé†’
1. **APIå¯†é’¥ä¿æŠ¤**: 
   - ä¸è¦å°†APIå¯†é’¥æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ
   - å»ºè®®ä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨æ•æ„Ÿä¿¡æ¯
   - ç”Ÿäº§ç¯å¢ƒåº”é…ç½®å®‰å…¨çš„å¯†é’¥ç®¡ç†

2. **ç½‘ç»œè¯·æ±‚**:
   - éµå®ˆç½‘ç«™robots.txtåè®®
   - æ§åˆ¶è¯·æ±‚é¢‘ç‡ï¼Œé¿å…ç»™æœåŠ¡å™¨é€ æˆå‹åŠ›
   - å»ºè®®æ·»åŠ User-Agentæ ‡è¯†

### ğŸ› ï¸ æŠ€æœ¯é™åˆ¶
1. **PDFè´¨é‡**: ä¾èµ–åŸå§‹PDFçš„æ–‡æœ¬å¯æå–æ€§
2. **ç½‘ç»œç¨³å®šæ€§**: éœ€è¦ç¨³å®šçš„ç½‘ç»œè¿æ¥
3. **å­˜å‚¨ç©ºé—´**: æ³¨æ„PDFæ–‡ä»¶å­˜å‚¨ç©ºé—´éœ€æ±‚
4. **æ—¥æœŸé™åˆ¶**: ä»…æ”¯æŒæœ‰PDFå­˜æ¡£çš„æ—¥æœŸ

### ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–
1. **æ‰¹é‡ä¸‹è½½**: å¯ä¿®æ”¹ä»£ç å®ç°æ‰¹é‡ä¸‹è½½å†å²æ•°æ®
2. **ç¼“å­˜æœºåˆ¶**: å¯æ·»åŠ æœ¬åœ°ç¼“å­˜é¿å…é‡å¤ä¸‹è½½
3. **å¹¶å‘å¤„ç†**: å¯ä¼˜åŒ–ä¸ºå¹¶å‘ä¸‹è½½æé«˜æ•ˆç‡

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### 1. ä¸‹è½½å¤±è´¥
```
é”™è¯¯: æœªæ‰¾åˆ°ä»»ä½•PDFé“¾æ¥
è§£å†³: 
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- éªŒè¯æ—¥æœŸæ˜¯å¦ä¸ºå·¥ä½œæ—¥(æŠ¥çº¸å¯èƒ½ä¸å‘å¸ƒ)
- ç¡®è®¤äººæ°‘æ—¥æŠ¥ç½‘ç«™ç»“æ„æ˜¯å¦å˜æ›´
```

#### 2. PDFåˆå¹¶å¤±è´¥
```
é”™è¯¯: PDFæ–‡ä»¶åˆå¹¶å¤±è´¥
è§£å†³:
- æ£€æŸ¥ä¸‹è½½çš„PDFæ–‡ä»¶å®Œæ•´æ€§
- ç¡®è®¤PyPDF2ç‰ˆæœ¬å…¼å®¹æ€§
- æŸ¥çœ‹ä¸´æ—¶æ–‡ä»¶æ˜¯å¦æŸå
```

#### 3. æ–‡æœ¬æå–å¤±è´¥
```
é”™è¯¯: æå–çš„æ–‡æœ¬ä¸ºç©ºæˆ–ä¹±ç 
è§£å†³:
- æ£€æŸ¥PDFæ˜¯å¦ä¸ºæ‰«æç‰ˆ(æ— æ–‡æœ¬å±‚)
- å°è¯•å…¶ä»–PDFå¤„ç†åº“(å¦‚pdfplumber)
- ç¡®è®¤PDFæ–‡ä»¶æœªåŠ å¯†æˆ–æŸå
```

#### 4. AIåˆ†æå¤±è´¥
```
é”™è¯¯: APIè°ƒç”¨å¤±è´¥æˆ–è¶…æ—¶
è§£å†³:
- æ£€æŸ¥APIå¯†é’¥æœ‰æ•ˆæ€§
- ç¡®è®¤ç½‘ç»œè¿æ¥åˆ°AIæœåŠ¡
- éªŒè¯APIé…é¢æ˜¯å¦å……è¶³
- æ£€æŸ¥è¯·æ±‚å†…å®¹é•¿åº¦æ˜¯å¦è¶…é™
```

### è°ƒè¯•æ¨¡å¼
å¯ç”¨è¯¦ç»†æ—¥å¿—è¾“å‡ºï¼š
```python
import logging
logging.basicConfig(level=logging.DEBUG)
```

## ğŸ“ˆ æ‰©å±•åŠŸèƒ½

### æ‰¹é‡å¤„ç†
```python
# æ‰¹é‡ä¸‹è½½æœ€è¿‘30å¤©çš„æŠ¥çº¸
from datetime import datetime, timedelta
from rmrb_down import download_rmrb_pdf

today = datetime.now()
for i in range(30):
    date_str = (today - timedelta(days=i)).strftime('%Y-%m-%d')
    download_rmrb_pdf(date_str)
```

### è‡ªå®šä¹‰åˆ†æ
```python
# ä¿®æ”¹åˆ†ææç¤ºè¯
CUSTOM_PROMPT = """
è¯·åˆ†æä»¥ä¸‹äººæ°‘æ—¥æŠ¥å†…å®¹ï¼Œé‡ç‚¹å…³æ³¨ï¼š
1. ç»æµå‘å±•ç›¸å…³å†…å®¹
2. ç§‘æŠ€åˆ›æ–°åŠ¨æ€
3. æ°‘ç”Ÿæ”¹å–„æªæ–½
...
"""
```

### æ•°æ®å¯¼å‡º
```python
# å¯¼å‡ºä¸ºJSONæ ¼å¼
import json
analysis_data = {
    "date": "2025-12-31",
    "major_events": [...],
    "commentary": [...],
    "quotes": [...],
    "new_terms": [...]
}
with open(f"data_{date_str}.json", "w", encoding="utf-8") as f:
    json.dump(analysis_data, f, ensure_ascii=False, indent=2)
```

## ğŸ“Š ç‰ˆæœ¬ä¿¡æ¯

- **å½“å‰ç‰ˆæœ¬**: 2.0.0
- **Pythonè¦æ±‚**: >= 3.7
- **ä½œè€…**: livingbody
- **æœ€åæ›´æ–°**: 2026-01-03

### æ›´æ–°æ—¥å¿—
- **v2.0.0**: å¢åŠ PDFä¸‹è½½åŠŸèƒ½ï¼Œå®ç°å®Œæ•´å·¥ä½œæµç¨‹
- **v1.0.0**: åŸºç¡€PDFæå–å’ŒAIåˆ†æåŠŸèƒ½


## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®ï¼š
- [PyPDF2](https://github.com/pypdf/PyPDF2) - PDFå¤„ç†
- [Requests](https://requests.readthedocs.io/) - HTTPè¯·æ±‚
- [Beautiful Soup](https://www.crummy.com/software/BeautifulSoup/) - HTMLè§£æ
- [OpenAI](https://openai.com/) - å¤§è¯­è¨€æ¨¡å‹æœåŠ¡

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ªæ˜Ÿæ ‡ï¼